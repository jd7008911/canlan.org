# ============================================
# Cang Lan Fu API – Environment Configuration
# ============================================
# Copy this file to .env and adjust values for your environment.
# All settings have safe defaults for local development.

# ---------------------------------------------------------------------
# Server Configuration
# ---------------------------------------------------------------------
# HTTP port the API listens on
PORT=8080

# Application environment (development, staging, production)
ENV=development

# Server timeouts (in Go duration format, e.g., 10s, 1m)
SERVER_READ_TIMEOUT=10s
SERVER_WRITE_TIMEOUT=10s
SERVER_IDLE_TIMEOUT=60s

# ---------------------------------------------------------------------
# Database (PostgreSQL) Configuration
# ---------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=canglanfu
DB_SSLMODE=disable

# Connection pool settings
DB_MAX_CONNS=25
DB_MIN_CONNS=5

# ---------------------------------------------------------------------
# Redis Configuration (for nonce storage, rate limiting, blacklist)
# ---------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ---------------------------------------------------------------------
# JWT Authentication Configuration
# ---------------------------------------------------------------------
# Secret key used to sign JWT tokens. In production, use a strong,
# randomly generated secret and keep it secure.
JWT_SECRET=change-me-in-production

# Token lifetimes (Go duration format)
JWT_ACCESS_DURATION=15m
JWT_REFRESH_DURATION=168h   # 7 days

# ---------------------------------------------------------------------
# Application-Specific Configuration
# ---------------------------------------------------------------------
# Application metadata
APP_NAME=CangLanFu
APP_VERSION=1.0.0

# Default withdrawal limits (in USDT)
DEFAULT_DAILY_LIMIT=1000.0
DEFAULT_MONTHLY_LIMIT=30000.0

# Mint block interval (how often new blocks are created)
MINT_BLOCK_INTERVAL=30m

# ---------------------------------------------------------------------
# Database Migration (Goose) – Optional, for convenience
# ---------------------------------------------------------------------
# Goose expects these environment variables if you run migrations via CLI
GOOSE_DRIVER=postgres
GOOSE_DBSTRING="postgres://postgres:postgres@localhost:5432/canglanfu?sslmode=disable"
GOOSE_MIGRATION_DIR=internal/db/migrations

# ---------------------------------------------------------------------
# External APIs (if applicable) – Uncomment and fill as needed
# ---------------------------------------------------------------------
# COINGECKO_API_KEY=
# BINANCE_API_KEY=
# INFURA_PROJECT_ID=
# ALCHEMY_API_KEY=

# ---------------------------------------------------------------------
# Observability (optional)
# ---------------------------------------------------------------------
# SENTRY_DSN=
# OTEL_EXPORTER_OTLP_ENDPOINT=
# LOG_LEVEL=info